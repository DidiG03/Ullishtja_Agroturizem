"use strict";(self.webpackChunkullishtja_agroturizem=self.webpackChunkullishtja_agroturizem||[]).push([[28],{28:(e,s,a)=>{a.r(s),a.d(s,{default:()=>f});var t=a(9379),i=a(5043),l=a(5275),r=a(1045),n=a(9363);const c=new class{constructor(){this.baseUrl="".concat("","/api/restaurant-settings")}async getSettings(){try{const e=await fetch(this.baseUrl),s=await e.json();if(!e.ok)throw new Error(s.error||"Failed to fetch settings");return s}catch(e){throw console.error("Error fetching restaurant settings:",e),e}}async updateSettings(e){try{const s=await fetch(this.baseUrl,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to update settings");return a}catch(s){throw console.error("Error updating restaurant settings:",s),s}}validateSettings(e){const s=[];if(e.restaurantName||s.push("Restaurant name is required"),e.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||s.push("Please enter a valid email address"):s.push("Email is required"),e.phone||s.push("Phone number is required"),e.operatingHours){["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].forEach(a=>{const t=e.operatingHours[a];t&&!t.closed&&(t.open&&t.close||s.push("".concat(a.charAt(0).toUpperCase()+a.slice(1)," hours are incomplete")),t.open>=t.close&&s.push("".concat(a.charAt(0).toUpperCase()+a.slice(1)," opening time must be before closing time")))})}return{isValid:0===s.length,errors:s}}};var o=a(7115),d=a(579);const h=function(){var e;const[s,a]=(0,i.useState)([]),[l,r]=(0,i.useState)([]),[n,c]=(0,i.useState)(null),[h,u]=(0,i.useState)(!1),[m,x]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),[j,v]=(0,i.useState)(null),[y,N]=(0,i.useState)(!0),[f,b]=(0,i.useState)(null),[A,C]=(0,i.useState)(null),[w,k]=(0,i.useState)(null),[E,S]=(0,i.useState)({nameAL:"",nameEN:"",nameIT:"",slug:"",displayOrder:0}),[F,T]=(0,i.useState)({categoryId:"",nameAL:"",nameEN:"",nameIT:"",descriptionAL:"",descriptionEN:"",descriptionIT:"",ingredientsAL:"",ingredientsEN:"",ingredientsIT:"",price:"",isVegetarian:!1,isSpicy:!1,isRecommended:!1,isNew:!1,imageUrl:"",displayOrder:0}),I=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;try{const s=await o.A.getMenuItems(e);s.success?r(s.data||[]):b(s.error||"Failed to load menu items")}catch(f){b("Failed to load menu items"),console.error(f)}},[n]),D=(0,i.useCallback)(async()=>{try{N(!0);const e=await o.A.getCategories();if(e.success){const s=e.data||[];a(s),s.length>0&&!n&&(c(s[0].id),I(s[0].id))}else b(e.error||"Failed to load categories")}catch(f){b("Failed to load categories"),console.error(f)}finally{N(!1)}},[n,I]);(0,i.useEffect)(()=>{D()},[D]);const L=()=>{S({nameAL:"",nameEN:"",nameIT:"",slug:"",displayOrder:0}),g(null),u(!1)},P=()=>{k(null)},U=()=>{T({categoryId:"",nameAL:"",nameEN:"",nameIT:"",descriptionAL:"",descriptionEN:"",descriptionIT:"",ingredientsAL:"",ingredientsEN:"",ingredientsIT:"",price:"",isVegetarian:!1,isSpicy:!1,isRecommended:!1,isNew:!1,imageUrl:"",displayOrder:0}),v(null),x(!1)};return y?(0,d.jsx)("div",{className:"loading",children:"Loading menu management..."}):(0,d.jsxs)("div",{className:"menu-management",children:[(0,d.jsxs)("div",{className:"menu-management-header",children:[(0,d.jsx)("h2",{children:"Menu Management"}),(0,d.jsxs)("div",{className:"header-actions",children:[(0,d.jsx)("button",{className:"btn btn-primary",onClick:()=>u(!0),children:"+ Add Category"}),(0,d.jsx)("button",{className:"btn btn-secondary",onClick:()=>x(!0),disabled:!n,children:"+ Add Menu Item"})]})]}),f&&(0,d.jsxs)("div",{className:"error-message",children:[f,(0,d.jsx)("button",{onClick:()=>b(null),children:"\xd7"})]}),(0,d.jsxs)("div",{className:"menu-content",children:[(0,d.jsxs)("div",{className:"categories-sidebar",children:[(0,d.jsx)("h3",{children:"Categories"}),(0,d.jsx)("div",{className:"category-list",children:s.map((e,t)=>(0,d.jsxs)("div",{className:"category-item ".concat(n===e.id?"active":""," ").concat(w===t?"drag-over":""," ").concat((null===A||void 0===A?void 0:A.category.id)===e.id?"dragging":""),draggable:!0,onDragStart:s=>((e,s,a)=>{C({category:s,index:a}),e.dataTransfer.effectAllowed="move"})(s,e,t),onDragOver:e=>((e,s)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",k(s)})(e,t),onDragLeave:P,onDrop:e=>(async(e,t)=>{if(e.preventDefault(),k(null),!A||A.index===t)return void C(null);const i=[...s],[l]=i.splice(A.index,1);i.splice(t,0,l);const r=i.map((e,s)=>({id:e.id,displayOrder:s+1}));try{a(i),await o.A.updateCategoryOrders(r)}catch(f){b("Failed to update category order"),await D()}C(null)})(e,t),onClick:()=>{c(e.id),I(e.id)},children:[(0,d.jsx)("div",{className:"drag-handle",title:"Drag to reorder",children:"\u22ee\u22ee"}),(0,d.jsxs)("div",{className:"category-info",children:[(0,d.jsx)("h4",{children:e.nameAL}),(0,d.jsx)("small",{children:e.nameEN})]}),(0,d.jsxs)("div",{className:"category-actions",children:[(0,d.jsx)("button",{className:"btn-icon",onClick:s=>{s.stopPropagation(),(e=>{g(e),S({nameAL:e.nameAL,nameEN:e.nameEN,nameIT:e.nameIT,slug:e.slug,displayOrder:e.displayOrder}),u(!0)})(e)},children:"\u270f\ufe0f"}),(0,d.jsx)("button",{className:"btn-icon",onClick:s=>{s.stopPropagation(),(async e=>{if(window.confirm("Are you sure? This will delete all items in this category."))try{await o.A.deleteCategory(e),await D()}catch(f){b("Failed to delete category")}})(e.id)},children:"\ud83d\uddd1\ufe0f"})]})]},e.id))})]}),(0,d.jsx)("div",{className:"menu-items-section",children:n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h3",{children:["Menu Items - ",null===(e=s.find(e=>e.id===n))||void 0===e?void 0:e.nameAL]}),(0,d.jsx)("div",{className:"menu-items-grid",children:l.map(e=>(0,d.jsxs)("div",{className:"menu-item-card",children:[(0,d.jsxs)("div",{className:"item-header",children:[(0,d.jsx)("h4",{children:e.nameAL}),(0,d.jsxs)("span",{className:"price",children:[e.price," ",e.currency]})]}),(0,d.jsx)("p",{className:"description",children:e.descriptionAL}),(0,d.jsxs)("div",{className:"item-badges",children:[e.isVegetarian&&(0,d.jsx)("span",{className:"badge vegetarian",children:"\ud83c\udf31"}),e.isSpicy&&(0,d.jsx)("span",{className:"badge spicy",children:"\ud83c\udf36\ufe0f"}),e.isRecommended&&(0,d.jsx)("span",{className:"badge recommended",children:"\u2b50"}),e.isNew&&(0,d.jsx)("span",{className:"badge new",children:"NEW"})]}),(0,d.jsxs)("div",{className:"item-actions",children:[(0,d.jsx)("button",{className:"btn btn-small",onClick:()=>(e=>{v(e),T({categoryId:e.categoryId,nameAL:e.nameAL,nameEN:e.nameEN,nameIT:e.nameIT,descriptionAL:e.descriptionAL||"",descriptionEN:e.descriptionEN||"",descriptionIT:e.descriptionIT||"",ingredientsAL:e.ingredientsAL||"",ingredientsEN:e.ingredientsEN||"",ingredientsIT:e.ingredientsIT||"",price:e.price.toString(),isVegetarian:e.isVegetarian,isSpicy:e.isSpicy,isRecommended:e.isRecommended,isNew:e.isNew,imageUrl:e.imageUrl||"",displayOrder:e.displayOrder}),x(!0)})(e),children:"Edit"}),(0,d.jsx)("button",{className:"btn btn-small btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this menu item?"))try{await o.A.deleteMenuItem(e),await I()}catch(f){b("Failed to delete menu item")}})(e.id),children:"Delete"})]})]},e.id))})]})})]}),h&&(0,d.jsx)("div",{className:"modal-overlay",children:(0,d.jsxs)("div",{className:"modal",children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:p?"Edit Category":"Add New Category"}),(0,d.jsx)("button",{className:"close-btn",onClick:L,children:"\xd7"})]}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{p?await o.A.updateCategory(p.id,E):await o.A.createCategory(E),await D(),L()}catch(f){b("Failed to ".concat(p?"update":"create"," category"))}},children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Albanian Name"}),(0,d.jsx)("input",{type:"text",value:E.nameAL,onChange:e=>{var s;S((0,t.A)((0,t.A)({},E),{},{nameAL:e.target.value,slug:(s=e.target.value,s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))}))},required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"English Name"}),(0,d.jsx)("input",{type:"text",value:E.nameEN,onChange:e=>S((0,t.A)((0,t.A)({},E),{},{nameEN:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Italian Name"}),(0,d.jsx)("input",{type:"text",value:E.nameIT,onChange:e=>S((0,t.A)((0,t.A)({},E),{},{nameIT:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"URL Slug"}),(0,d.jsx)("input",{type:"text",value:E.slug,onChange:e=>S((0,t.A)((0,t.A)({},E),{},{slug:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Display Order"}),(0,d.jsx)("input",{type:"number",value:E.displayOrder,onChange:e=>S((0,t.A)((0,t.A)({},E),{},{displayOrder:parseInt(e.target.value)}))})]}),(0,d.jsxs)("div",{className:"form-actions",children:[(0,d.jsx)("button",{type:"button",onClick:L,children:"Cancel"}),(0,d.jsxs)("button",{type:"submit",className:"btn-primary",children:[p?"Update":"Create"," Category"]})]})]})]})}),m&&(0,d.jsx)("div",{className:"modal-overlay",children:(0,d.jsxs)("div",{className:"modal large",children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:j?"Edit Menu Item":"Add New Menu Item"}),(0,d.jsx)("button",{className:"close-btn",onClick:U,children:"\xd7"})]}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=(0,t.A)((0,t.A)({},F),{},{price:parseFloat(F.price),categoryId:n});j?await o.A.updateMenuItem(j.id,e):await o.A.createMenuItem(e),await I(),U()}catch(f){b("Failed to ".concat(j?"update":"create"," menu item"))}},children:[(0,d.jsxs)("div",{className:"form-grid",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Albanian Name"}),(0,d.jsx)("input",{type:"text",value:F.nameAL,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{nameAL:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"English Name"}),(0,d.jsx)("input",{type:"text",value:F.nameEN,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{nameEN:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Italian Name"}),(0,d.jsx)("input",{type:"text",value:F.nameIT,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{nameIT:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group full-width",children:[(0,d.jsx)("label",{children:"Albanian Description"}),(0,d.jsx)("textarea",{value:F.descriptionAL,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{descriptionAL:e.target.value})),rows:"3"})]}),(0,d.jsxs)("div",{className:"form-group full-width",children:[(0,d.jsx)("label",{children:"English Description"}),(0,d.jsx)("textarea",{value:F.descriptionEN,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{descriptionEN:e.target.value})),rows:"3"})]}),(0,d.jsxs)("div",{className:"form-group full-width",children:[(0,d.jsx)("label",{children:"Italian Description"}),(0,d.jsx)("textarea",{value:F.descriptionIT,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{descriptionIT:e.target.value})),rows:"3"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Albanian Ingredients"}),(0,d.jsx)("input",{type:"text",value:F.ingredientsAL,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{ingredientsAL:e.target.value})),placeholder:"Spinaq, djath\xeb, vez\xeb..."})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"English Ingredients"}),(0,d.jsx)("input",{type:"text",value:F.ingredientsEN,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{ingredientsEN:e.target.value})),placeholder:"Spinach, cheese, eggs..."})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Italian Ingredients"}),(0,d.jsx)("input",{type:"text",value:F.ingredientsIT,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{ingredientsIT:e.target.value})),placeholder:"Spinaci, formaggio, uova..."})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Price (ALL)"}),(0,d.jsx)("input",{type:"number",step:"0.01",value:F.price,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{price:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Display Order"}),(0,d.jsx)("input",{type:"number",value:F.displayOrder,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{displayOrder:parseInt(e.target.value)}))})]}),(0,d.jsxs)("div",{className:"form-group full-width",children:[(0,d.jsx)("label",{children:"Image URL (optional)"}),(0,d.jsx)("input",{type:"url",value:F.imageUrl,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{imageUrl:e.target.value})),placeholder:"https://example.com/image.jpg"})]}),(0,d.jsxs)("div",{className:"form-group checkbox-group",children:[(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:F.isVegetarian,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{isVegetarian:e.target.checked}))}),"Vegetarian \ud83c\udf31"]}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:F.isSpicy,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{isSpicy:e.target.checked}))}),"Spicy \ud83c\udf36\ufe0f"]}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:F.isRecommended,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{isRecommended:e.target.checked}))}),"Recommended \u2b50"]}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:F.isNew,onChange:e=>T((0,t.A)((0,t.A)({},F),{},{isNew:e.target.checked}))}),"New Item \ud83c\udd95"]})]})]}),(0,d.jsxs)("div",{className:"form-actions",children:[(0,d.jsx)("button",{type:"button",onClick:U,children:"Cancel"}),(0,d.jsxs)("button",{type:"submit",className:"btn-primary",children:[j?"Update":"Create"," Menu Item"]})]})]})]})})]})},u=()=>{const[e,s]=(0,i.useState)([{id:1,type:"square",x:80,y:100,size:60,seats:4,status:"available",name:"T1"},{id:2,type:"square",x:200,y:100,size:60,seats:6,status:"occupied",name:"T2"},{id:3,type:"square",x:80,y:200,size:60,seats:4,status:"available",name:"T3"},{id:4,type:"square",x:200,y:200,size:60,seats:4,status:"reserved",name:"T4"},{id:5,type:"square",x:80,y:300,size:60,seats:4,status:"available",name:"T5"},{id:6,type:"square",x:200,y:300,size:60,seats:4,status:"cleaning",name:"T6"},{id:15,type:"square",x:80,y:440,size:60,seats:4,status:"available",name:"TG1"},{id:16,type:"square",x:200,y:440,size:60,seats:4,status:"available",name:"TG2"},{id:17,type:"square",x:80,y:520,size:60,seats:6,status:"occupied",name:"TG3"},{id:18,type:"square",x:200,y:520,size:60,seats:4,status:"reserved",name:"TG4"},{id:19,type:"square",x:390,y:440,size:60,seats:4,status:"available",name:"P1"},{id:20,type:"square",x:510,y:440,size:60,seats:4,status:"reserved",name:"P2"},{id:21,type:"square",x:390,y:520,size:60,seats:6,status:"available",name:"P3"},{id:22,type:"square",x:510,y:520,size:60,seats:4,status:"occupied",name:"P4"},{id:7,type:"square",x:390,y:100,size:60,seats:4,status:"available",name:"M1"},{id:8,type:"square",x:510,y:100,size:60,seats:4,status:"occupied",name:"M2"},{id:9,type:"square",x:570,y:100,size:60,seats:6,status:"reserved",name:"M3"},{id:10,type:"square",x:390,y:200,size:60,seats:4,status:"cleaning",name:"M4"},{id:11,type:"square",x:510,y:200,size:60,seats:4,status:"available",name:"M5"},{id:12,type:"square",x:570,y:200,size:60,seats:6,status:"occupied",name:"M6"},{id:13,type:"square",x:390,y:300,size:60,seats:4,status:"available",name:"M7"},{id:14,type:"square",x:510,y:300,size:60,seats:4,status:"reserved",name:"M8"}]),[a,l]=(0,i.useState)(null),r=(e,a)=>{s(s=>s.map(s=>s.id===e?(0,t.A)((0,t.A)({},s),{},{status:a}):s)),l(null)},n=e=>{switch(e){case"available":return"#10B981";case"occupied":return"#EF4444";case"reserved":return"#F59E0B";case"cleaning":return"#6B7280";default:return"#3B82F6"}},c=e=>{const s={key:e.id,onClick:()=>(e=>{l(e)})(e),style:{cursor:"pointer",fill:n(e.status),stroke:(null===a||void 0===a?void 0:a.id)===e.id?"#1F2937":"#374151",strokeWidth:(null===a||void 0===a?void 0:a.id)===e.id?3:2,filter:(null===a||void 0===a?void 0:a.id)===e.id?"drop-shadow(0 4px 8px rgba(0,0,0,0.3))":"drop-shadow(0 2px 4px rgba(0,0,0,0.1))",transition:"all 0.3s ease"}};return(0,d.jsx)("rect",(0,t.A)((0,t.A)({},s),{},{x:e.x,y:e.y,width:e.size,height:e.size,rx:"8"}))};return(0,d.jsxs)("div",{className:"restaurant-layout",children:[(0,d.jsxs)("div",{className:"layout-header",children:[(0,d.jsxs)("div",{className:"header-content",children:[(0,d.jsx)("h2",{children:"\ud83c\udfdb\ufe0f Restaurant Floor Plan"}),(0,d.jsx)("p",{children:"Ullishtja Agroturizem - Table Management System"})]}),(0,d.jsx)("div",{className:"layout-controls",children:(0,d.jsxs)("div",{className:"status-legend",children:[(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("div",{className:"legend-color available"}),(0,d.jsx)("span",{children:"Available"})]}),(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("div",{className:"legend-color occupied"}),(0,d.jsx)("span",{children:"Occupied"})]}),(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("div",{className:"legend-color reserved"}),(0,d.jsx)("span",{children:"Reserved"})]}),(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("div",{className:"legend-color cleaning"}),(0,d.jsx)("span",{children:"Cleaning"})]})]})})]}),(0,d.jsxs)("div",{className:"layout-container",children:[(0,d.jsx)("div",{className:"layout-canvas",children:(0,d.jsxs)("svg",{width:"700",height:"650",viewBox:"0 0 700 650",className:"restaurant-floor",children:[(0,d.jsxs)("defs",{children:[(0,d.jsxs)("pattern",{id:"woodPattern",patternUnits:"userSpaceOnUse",width:"20",height:"20",children:[(0,d.jsx)("rect",{width:"20",height:"20",fill:"#8B4513"}),(0,d.jsx)("rect",{x:"2",y:"2",width:"16",height:"16",fill:"#A0522D"})]}),(0,d.jsxs)("pattern",{id:"tilePattern",patternUnits:"userSpaceOnUse",width:"15",height:"15",children:[(0,d.jsx)("rect",{width:"15",height:"15",fill:"#F5F5F5"}),(0,d.jsx)("rect",{x:"1",y:"1",width:"13",height:"13",fill:"#FFFFFF"})]}),(0,d.jsxs)("pattern",{id:"gardenPattern",patternUnits:"userSpaceOnUse",width:"25",height:"25",children:[(0,d.jsx)("rect",{width:"25",height:"25",fill:"#D4F4DD"}),(0,d.jsx)("circle",{cx:"12",cy:"12",r:"3",fill:"#10B981"}),(0,d.jsx)("circle",{cx:"5",cy:"20",r:"2",fill:"#059669"}),(0,d.jsx)("circle",{cx:"20",cy:"8",r:"2",fill:"#047857"})]}),(0,d.jsxs)("pattern",{id:"privePattern",patternUnits:"userSpaceOnUse",width:"20",height:"20",children:[(0,d.jsx)("rect",{width:"20",height:"20",fill:"#FEF3C7"}),(0,d.jsx)("rect",{x:"2",y:"2",width:"16",height:"16",fill:"#FDE68A"}),(0,d.jsx)("rect",{x:"4",y:"4",width:"12",height:"12",fill:"#FCD34D"})]})]}),(0,d.jsx)("rect",{x:"30",y:"30",width:"640",height:"590",fill:"#F8F9FA",stroke:"#E5E7EB",strokeWidth:"4",rx:"15"}),(0,d.jsx)("rect",{x:"50",y:"60",width:"290",height:"320",fill:"#F0FDF4",stroke:"#10B981",strokeWidth:"3",rx:"12"}),(0,d.jsx)("rect",{x:"45",y:"55",width:"300",height:"330",fill:"none",stroke:"#059669",strokeWidth:"2",rx:"15"}),(0,d.jsx)("rect",{x:"50",y:"410",width:"290",height:"190",fill:"url(#gardenPattern)",stroke:"#059669",strokeWidth:"3",rx:"12"}),(0,d.jsx)("rect",{x:"45",y:"405",width:"300",height:"200",fill:"none",stroke:"#047857",strokeWidth:"2",rx:"15"}),(0,d.jsx)("rect",{x:"360",y:"60",width:"290",height:"320",fill:"url(#tilePattern)",stroke:"#D1D5DB",strokeWidth:"3",rx:"12"}),(0,d.jsx)("rect",{x:"355",y:"55",width:"300",height:"330",fill:"none",stroke:"#6B7280",strokeWidth:"2",rx:"15"}),(0,d.jsx)("rect",{x:"360",y:"410",width:"290",height:"190",fill:"url(#privePattern)",stroke:"#D97706",strokeWidth:"3",rx:"12"}),(0,d.jsx)("rect",{x:"355",y:"405",width:"300",height:"200",fill:"none",stroke:"#B45309",strokeWidth:"2",rx:"15"}),(0,d.jsx)("rect",{x:"570",y:"60",width:"70",height:"80",fill:"#FEE2E2",stroke:"#EF4444",strokeWidth:"2",rx:"8"}),(0,d.jsx)("rect",{x:"575",y:"65",width:"60",height:"15",fill:"#DC2626",rx:"4"}),(0,d.jsx)("text",{x:"605",y:"75",textAnchor:"middle",style:{fontSize:"10px",fontWeight:"bold",fill:"#FFFFFF"},children:"KITCHEN"}),(0,d.jsx)("circle",{cx:"585",cy:"95",r:"6",fill:"#9CA3AF"}),(0,d.jsx)("circle",{cx:"600",cy:"95",r:"6",fill:"#9CA3AF"}),(0,d.jsx)("circle",{cx:"615",cy:"95",r:"6",fill:"#9CA3AF"}),(0,d.jsx)("rect",{x:"580",y:"110",width:"25",height:"12",fill:"#6B7280",rx:"2"}),(0,d.jsx)("rect",{x:"610",y:"110",width:"20",height:"12",fill:"#6B7280",rx:"2"}),(0,d.jsx)("rect",{x:"570",y:"150",width:"70",height:"80",fill:"#FEF3C7",stroke:"#D97706",strokeWidth:"2",rx:"8"}),(0,d.jsx)("rect",{x:"575",y:"155",width:"60",height:"15",fill:"#B45309",rx:"4"}),(0,d.jsx)("text",{x:"605",y:"165",textAnchor:"middle",style:{fontSize:"10px",fontWeight:"bold",fill:"#FFFFFF"},children:"BAR"}),(0,d.jsx)("circle",{cx:"585",cy:"185",r:"6",fill:"#8B4513"}),(0,d.jsx)("circle",{cx:"600",cy:"185",r:"6",fill:"#8B4513"}),(0,d.jsx)("circle",{cx:"615",cy:"185",r:"6",fill:"#8B4513"}),(0,d.jsx)("rect",{x:"580",y:"200",width:"25",height:"12",fill:"#A0522D",rx:"2"}),(0,d.jsx)("rect",{x:"610",y:"200",width:"20",height:"12",fill:"#A0522D",rx:"2"}),(0,d.jsx)("rect",{x:"310",y:"385",width:"80",height:"20",fill:"#3B82F6",stroke:"#1D4ED8",strokeWidth:"2",rx:"8"}),(0,d.jsx)("text",{x:"350",y:"398",textAnchor:"middle",style:{fontSize:"12px",fontWeight:"bold",fill:"#FFFFFF"},children:"ENTRANCE"}),(0,d.jsx)("rect",{x:"50",y:"75",width:"8",height:"40",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"50",y:"130",width:"8",height:"40",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"50",y:"185",width:"8",height:"40",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"50",y:"470",width:"8",height:"40",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"50",y:"530",width:"8",height:"40",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"642",y:"75",width:"8",height:"40",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"642",y:"130",width:"8",height:"40",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"642",y:"185",width:"8",height:"40",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"642",y:"240",width:"8",height:"40",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"642",y:"295",width:"8",height:"40",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"1",rx:"2"}),(0,d.jsx)("circle",{cx:"70",cy:"80",r:"8",fill:"#22C55E"}),(0,d.jsx)("circle",{cx:"85",cy:"85",r:"6",fill:"#16A34A"}),(0,d.jsx)("circle",{cx:"75",cy:"95",r:"5",fill:"#15803D"}),(0,d.jsx)("circle",{cx:"310",cy:"80",r:"8",fill:"#22C55E"}),(0,d.jsx)("circle",{cx:"300",cy:"90",r:"10",fill:"#16A34A"}),(0,d.jsx)("circle",{cx:"320",cy:"95",r:"6",fill:"#15803D"}),(0,d.jsx)("circle",{cx:"70",cy:"350",r:"10",fill:"#22C55E"}),(0,d.jsx)("circle",{cx:"310",cy:"360",r:"8",fill:"#16A34A"}),(0,d.jsx)("circle",{cx:"70",cy:"450",r:"10",fill:"#059669"}),(0,d.jsx)("circle",{cx:"85",cy:"465",r:"8",fill:"#047857"}),(0,d.jsx)("circle",{cx:"75",cy:"480",r:"6",fill:"#065F46"}),(0,d.jsx)("circle",{cx:"310",cy:"460",r:"12",fill:"#059669"}),(0,d.jsx)("circle",{cx:"300",cy:"480",r:"8",fill:"#047857"}),(0,d.jsx)("circle",{cx:"320",cy:"495",r:"6",fill:"#065F46"}),(0,d.jsx)("circle",{cx:"70",cy:"550",r:"9",fill:"#059669"}),(0,d.jsx)("circle",{cx:"310",cy:"570",r:"10",fill:"#047857"}),(0,d.jsx)("circle",{cx:"120",cy:"440",r:"5",fill:"#22C55E"}),(0,d.jsx)("circle",{cx:"250",cy:"440",r:"7",fill:"#16A34A"}),(0,d.jsx)("circle",{cx:"120",cy:"580",r:"6",fill:"#22C55E"}),(0,d.jsx)("circle",{cx:"250",cy:"580",r:"8",fill:"#16A34A"}),(0,d.jsx)("circle",{cx:"380",cy:"430",r:"8",fill:"#D97706"}),(0,d.jsx)("circle",{cx:"520",cy:"440",r:"6",fill:"#B45309"}),(0,d.jsx)("circle",{cx:"620",cy:"450",r:"7",fill:"#92400E"}),(0,d.jsx)("circle",{cx:"380",cy:"570",r:"9",fill:"#D97706"}),(0,d.jsx)("circle",{cx:"520",cy:"560",r:"8",fill:"#B45309"}),(0,d.jsx)("circle",{cx:"620",cy:"570",r:"6",fill:"#92400E"}),(0,d.jsx)("rect",{x:"352",y:"410",width:"4",height:"190",fill:"#8B4513",stroke:"#654321",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"658",y:"410",width:"4",height:"190",fill:"#8B4513",stroke:"#654321",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"370",y:"402",width:"270",height:"4",fill:"#8B4513",stroke:"#654321",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"370",y:"608",width:"270",height:"4",fill:"#8B4513",stroke:"#654321",strokeWidth:"1",rx:"2"}),(0,d.jsx)("rect",{x:"570",y:"520",width:"60",height:"60",fill:"#F3F4F6",stroke:"#6B7280",strokeWidth:"2",rx:"6"}),(0,d.jsx)("text",{x:"600",y:"540",textAnchor:"middle",style:{fontSize:"10px",fontWeight:"bold",fill:"#6B7280"},children:"WC"}),(0,d.jsx)("circle",{cx:"585",cy:"560",r:"8",fill:"#E5E7EB",stroke:"#9CA3AF",strokeWidth:"1"}),(0,d.jsx)("circle",{cx:"615",cy:"560",r:"8",fill:"#E5E7EB",stroke:"#9CA3AF",strokeWidth:"1"}),(0,d.jsxs)("g",{children:[(0,d.jsx)("rect",{x:"150",y:"25",width:"80",height:"25",fill:"rgba(240,253,244,0.9)",stroke:"#10B981",strokeWidth:"1",rx:"6"}),(0,d.jsx)("text",{x:"190",y:"40",textAnchor:"middle",style:{fontSize:"14px",fontWeight:"bold",fill:"#047857"},children:"Terrace"})]}),(0,d.jsxs)("g",{children:[(0,d.jsx)("rect",{x:"120",y:"385",width:"120",height:"25",fill:"rgba(212,244,221,0.9)",stroke:"#059669",strokeWidth:"1",rx:"6"}),(0,d.jsx)("text",{x:"180",y:"400",textAnchor:"middle",style:{fontSize:"14px",fontWeight:"bold",fill:"#047857"},children:"Terrace Garden"})]}),(0,d.jsxs)("g",{children:[(0,d.jsx)("rect",{x:"450",y:"385",width:"80",height:"25",fill:"rgba(248,246,240,0.9)",stroke:"#D97706",strokeWidth:"1",rx:"6"}),(0,d.jsx)("text",{x:"490",y:"400",textAnchor:"middle",style:{fontSize:"14px",fontWeight:"bold",fill:"#B45309"},children:"Prive"})]}),(0,d.jsxs)("g",{children:[(0,d.jsx)("rect",{x:"450",y:"25",width:"120",height:"25",fill:"rgba(255,255,255,0.9)",stroke:"#E5E7EB",strokeWidth:"1",rx:"6"}),(0,d.jsx)("text",{x:"510",y:"40",textAnchor:"middle",style:{fontSize:"14px",fontWeight:"bold",fill:"#1F2937"},children:"Main Dining Area"})]}),e.map(e=>c(e)),e.map(e=>(e=>{const s=e.x+e.size/2,a=e.y+e.size/2;return(0,d.jsx)("text",{x:s,y:a,textAnchor:"middle",dominantBaseline:"middle",style:{fontSize:"18px",fontWeight:"bold",fill:"#FFFFFF",pointerEvents:"none",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:e.seats},"label-".concat(e.id))})(e))]})}),a&&(0,d.jsxs)("div",{className:"table-details",children:[(0,d.jsxs)("div",{className:"table-details-header",children:[(0,d.jsxs)("h3",{children:["Table ",a.name]}),(0,d.jsx)("div",{className:"status-badge ".concat(a.status),children:a.status})]}),(0,d.jsxs)("div",{className:"table-info",children:[(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"info-label",children:"Type:"}),(0,d.jsx)("span",{className:"info-value",children:a.type})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"info-label",children:"Capacity:"}),(0,d.jsxs)("span",{className:"info-value",children:[a.seats," guests"]})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"info-label",children:"Location:"}),(0,d.jsx)("span",{className:"info-value",children:a.x<350?a.y<390?"Terrace":"Terrace Garden":a.y<390?"Main Dining":"Prive"})]})]}),(0,d.jsxs)("div",{className:"table-actions",children:[(0,d.jsx)("button",{className:"status-btn available",onClick:()=>r(a.id,"available"),children:"\u2705 Set Available"}),(0,d.jsx)("button",{className:"status-btn occupied",onClick:()=>r(a.id,"occupied"),children:"\ud83d\udd34 Set Occupied"}),(0,d.jsx)("button",{className:"status-btn reserved",onClick:()=>r(a.id,"reserved"),children:"\ud83d\udfe1 Set Reserved"}),(0,d.jsx)("button",{className:"status-btn cleaning",onClick:()=>r(a.id,"cleaning"),children:"\ud83e\uddf9 Set Cleaning"})]}),(0,d.jsx)("button",{className:"close-details",onClick:()=>l(null),children:"\u2715 Close Details"})]})]}),(0,d.jsxs)("div",{className:"layout-stats",children:[(0,d.jsxs)("div",{className:"stat-card available",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\u2705"}),(0,d.jsxs)("div",{className:"stat-content",children:[(0,d.jsx)("span",{className:"stat-number",children:e.filter(e=>"available"===e.status).length}),(0,d.jsx)("span",{className:"stat-label",children:"Available Tables"})]})]}),(0,d.jsxs)("div",{className:"stat-card occupied",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\ud83d\udd34"}),(0,d.jsxs)("div",{className:"stat-content",children:[(0,d.jsx)("span",{className:"stat-number",children:e.filter(e=>"occupied"===e.status).length}),(0,d.jsx)("span",{className:"stat-label",children:"Occupied Tables"})]})]}),(0,d.jsxs)("div",{className:"stat-card reserved",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\ud83d\udfe1"}),(0,d.jsxs)("div",{className:"stat-content",children:[(0,d.jsx)("span",{className:"stat-number",children:e.filter(e=>"reserved"===e.status).length}),(0,d.jsx)("span",{className:"stat-label",children:"Reserved Tables"})]})]}),(0,d.jsxs)("div",{className:"stat-card total",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,d.jsxs)("div",{className:"stat-content",children:[(0,d.jsx)("span",{className:"stat-number",children:e.reduce((e,s)=>e+s.seats,0)}),(0,d.jsx)("span",{className:"stat-label",children:"Total Capacity"})]})]})]})]})},m=e=>{var s;let{slot:a,onClose:l,onSave:r,title:n}=e;const[c,o]=(0,i.useState)({time:(null===a||void 0===a?void 0:a.time)||"",maxCapacity:(null===a||void 0===a?void 0:a.maxCapacity)||20,duration:(null===a||void 0===a?void 0:a.duration)||120,displayOrder:(null===a||void 0===a?void 0:a.displayOrder)||0,isActive:null===(s=null===a||void 0===a?void 0:a.isActive)||void 0===s||s}),h=e=>{const{name:s,value:a,type:i,checked:l}=e.target;o(e=>(0,t.A)((0,t.A)({},e),{},{[s]:"checkbox"===i?l:a}))};return(0,d.jsx)("div",{className:"modal-overlay",onClick:l,children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:n}),(0,d.jsx)("button",{className:"close-button",onClick:l,children:"\xd7"})]}),(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(c)},children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Time"}),(0,d.jsx)("input",{type:"time",name:"time",value:c.time,onChange:h,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Maximum Capacity"}),(0,d.jsx)("input",{type:"number",name:"maxCapacity",value:c.maxCapacity,onChange:h,min:"1",max:"100",required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Duration (minutes)"}),(0,d.jsx)("input",{type:"number",name:"duration",value:c.duration,onChange:h,min:"30",max:"300",step:"30",required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Display Order"}),(0,d.jsx)("input",{type:"number",name:"displayOrder",value:c.displayOrder,onChange:h,min:"0",required:!0})]}),(0,d.jsx)("div",{className:"form-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",name:"isActive",checked:c.isActive,onChange:h}),"Active"]})}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:l,children:"Cancel"}),(0,d.jsx)("button",{type:"submit",children:"Save"})]})]})]})})},x=e=>{let{slot:s,onClose:a,onUpdate:l,daysOfWeek:r}=e;const[n,c]=(0,i.useState)({});(0,i.useEffect)(()=>{const e={};r.forEach(a=>{var t;const i=null===(t=s.capacityOverrides)||void 0===t?void 0:t.find(e=>e.dayOfWeek===a.id&&e.isActive);e[a.id]=i?i.maxCapacity:s.maxCapacity}),c(e)},[s,r]);return(0,d.jsx)("div",{className:"modal-overlay",onClick:a,children:(0,d.jsxs)("div",{className:"modal-content capacity-modal",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsxs)("h3",{children:["Capacity Settings - ",s.time]}),(0,d.jsx)("button",{className:"close-button",onClick:a,children:"\xd7"})]}),(0,d.jsxs)("div",{className:"capacity-form",children:[(0,d.jsxs)("p",{children:["Default capacity: ",s.maxCapacity," guests"]}),(0,d.jsx)("div",{className:"capacity-grid",children:r.map(e=>(0,d.jsxs)("div",{className:"capacity-row",children:[(0,d.jsx)("label",{children:e.name}),(0,d.jsx)("input",{type:"number",value:n[e.id]||s.maxCapacity,onChange:s=>{return a=e.id,i=s.target.value,void c(e=>(0,t.A)((0,t.A)({},e),{},{[a]:parseInt(i)}));var a,i},min:"1",max:"100"})]},e.id))})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:a,children:"Cancel"}),(0,d.jsx)("button",{type:"button",onClick:async()=>{try{for(const e in n){const a=n[e];a!==s.maxCapacity&&await fetch("/api/timeslots-complete?path=capacity",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeSlotId:s.id,dayOfWeek:parseInt(e),maxCapacity:a})})}alert("Capacity settings saved successfully!"),l()}catch(e){console.error("Error saving capacity settings:",e),alert("Error saving capacity settings")}},children:"Save"})]})]})})},p=()=>{const[e,s]=(0,i.useState)([]),[a,l]=(0,i.useState)(!0),[r,n]=(0,i.useState)(!1),[c,o]=(0,i.useState)(null),[h,u]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),j=[{id:0,name:"Sunday",short:"Sun"},{id:1,name:"Monday",short:"Mon"},{id:2,name:"Tuesday",short:"Tue"},{id:3,name:"Wednesday",short:"Wed"},{id:4,name:"Thursday",short:"Thu"},{id:5,name:"Friday",short:"Fri"},{id:6,name:"Saturday",short:"Sat"}];(0,i.useEffect)(()=>{v()},[]);const v=async()=>{try{l(!0);const e=await fetch("/api/timeslots-complete"),a=await e.json();a.success?s(a.data):console.error("Failed to fetch time slots:",a.error)}catch(e){console.error("Error fetching time slots:",e)}finally{l(!1)}},y=e=>{const[s,a]=e.split(":"),t=parseInt(s),i=t>=12?"PM":"AM";return"".concat(t%12||12,":").concat(a," ").concat(i)},N=(e,s)=>{var a;const t=null===(a=e.capacityOverrides)||void 0===a?void 0:a.find(e=>e.dayOfWeek===s&&e.isActive);return t?t.maxCapacity:e.maxCapacity};return a?(0,d.jsx)("div",{className:"loading",children:"Loading time slots..."}):(0,d.jsxs)("div",{className:"timeslot-management",children:[(0,d.jsxs)("div",{className:"timeslot-header",children:[(0,d.jsx)("h2",{children:"Time Slot Management"}),(0,d.jsxs)("div",{className:"header-buttons",children:[(0,d.jsx)("button",{className:"seed-button",onClick:async()=>{try{const e=await fetch("/api/timeslots-complete?action=seed"),s=await e.json();s.success?(alert("Default time slots created successfully!"),v()):alert("Failed to create default time slots: "+s.error)}catch(e){console.error("Error seeding time slots:",e),alert("Error creating default time slots")}},disabled:e.length>0,children:e.length>0?"Default slots created":"Create Default Slots"}),(0,d.jsx)("button",{className:"add-button",onClick:()=>n(!0),children:"Add Time Slot"})]})]}),(0,d.jsx)("div",{className:"timeslot-grid",children:e.map(a=>(0,d.jsxs)("div",{className:"timeslot-card",children:[(0,d.jsxs)("div",{className:"timeslot-header",children:[(0,d.jsx)("h3",{children:y(a.time)}),(0,d.jsx)("span",{className:"status ".concat(a.isActive?"active":"inactive"),children:a.isActive?"Active":"Inactive"})]}),(0,d.jsxs)("div",{className:"timeslot-info",children:[(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{children:"Default Capacity:"}),(0,d.jsxs)("span",{children:[a.maxCapacity," guests"]})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{children:"Duration:"}),(0,d.jsxs)("span",{children:[a.duration," minutes"]})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{children:"Order:"}),(0,d.jsx)("span",{children:a.displayOrder})]})]}),(0,d.jsxs)("div",{className:"capacity-overrides",children:[(0,d.jsx)("h4",{children:"Day-specific Capacity:"}),(0,d.jsx)("div",{className:"days-grid",children:j.map(e=>(0,d.jsxs)("div",{className:"day-capacity",children:[(0,d.jsx)("span",{className:"day-name",children:e.short}),(0,d.jsx)("span",{className:"capacity-value",children:N(a,e.id)})]},e.id))})]}),(0,d.jsxs)("div",{className:"timeslot-actions",children:[(0,d.jsx)("button",{className:"edit-button",onClick:()=>o(a),children:"Edit"}),(0,d.jsx)("button",{className:"capacity-button",onClick:()=>{g(a),u(!0)},children:"Capacity"}),(0,d.jsx)("button",{className:"delete-button",onClick:()=>(async a=>{if(window.confirm("Are you sure you want to delete this time slot?"))try{const t=await fetch("/api/timeslots-complete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a})}),i=await t.json();i.success?(s(e.filter(e=>e.id!==a)),alert("Time slot deleted successfully!")):alert("Failed to delete time slot: "+i.error)}catch(t){console.error("Error deleting time slot:",t),alert("Error deleting time slot")}})(a.id),children:"Delete"})]})]},a.id))}),r&&(0,d.jsx)(m,{onClose:()=>n(!1),onSave:async a=>{try{const t=await fetch("/api/timeslots-complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),i=await t.json();i.success?(s([...e,i.data]),n(!1),alert("Time slot created successfully!")):alert("Failed to create time slot: "+i.error)}catch(t){console.error("Error creating time slot:",t),alert("Error creating time slot")}},title:"Add New Time Slot"}),c&&(0,d.jsx)(m,{slot:c,onClose:()=>o(null),onSave:a=>(async(a,i)=>{try{const l=await fetch("/api/timeslots-complete",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,t.A)({id:a},i))}),r=await l.json();r.success?(s(e.map(e=>e.id===a?r.data:e)),o(null),alert("Time slot updated successfully!")):alert("Failed to update time slot: "+r.error)}catch(l){console.error("Error updating time slot:",l),alert("Error updating time slot")}})(c.id,a),title:"Edit Time Slot"}),h&&p&&(0,d.jsx)(x,{slot:p,onClose:()=>{u(!1),g(null)},onUpdate:()=>{v(),u(!1),g(null)},daysOfWeek:j})]})};var g=a(4554);const j=()=>{const[e,s]=(0,i.useState)("posts"),[a,l]=(0,i.useState)([]),[r,n]=(0,i.useState)([]),[c,o]=(0,i.useState)(!1),[h,u]=(0,i.useState)(""),[m,x]=(0,i.useState)(""),[p,j]=(0,i.useState)(!1),[v,y]=(0,i.useState)(null),[N,f]=(0,i.useState)({categoryId:"",slug:"",titleAL:"",titleEN:"",titleIT:"",excerptAL:"",excerptEN:"",excerptIT:"",contentAL:"",contentEN:"",contentIT:"",metaDescriptionAL:"",metaDescriptionEN:"",metaDescriptionIT:"",metaKeywordsAL:"",metaKeywordsEN:"",metaKeywordsIT:"",featuredImageUrl:"",featuredImageAlt:"",isPublished:!1,isFeatured:!1,displayOrder:0}),[b,A]=(0,i.useState)(!1),[C,w]=(0,i.useState)(null),[k,E]=(0,i.useState)({nameAL:"",nameEN:"",nameIT:"",slug:"",descriptionAL:"",descriptionEN:"",descriptionIT:"",displayOrder:0,isActive:!0}),[S,F]=(0,i.useState)(""),[T,I]=(0,i.useState)(""),[D,L]=(0,i.useState)(""),P=(0,i.useCallback)(async()=>{o(!0);try{const[e,s]=await Promise.all([g.A.getPosts({language:"al"}),g.A.getCategories({language:"al",includePosts:!0})]);l(e.data||[]),n(s.data||[])}catch(e){u("Failed to load data: "+e.message)}finally{o(!1)}},[]);(0,i.useEffect)(()=>{P()},[P]);const U=()=>{u(""),x("")},q=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post";const i="post"===a?N:k,l="post"===a?f:E,r={[e]:s};e===("post"===a?"titleAL":"nameAL")&&s&&(r.slug=g.A.generateSlug(s)),l((0,t.A)((0,t.A)({},i),r))},O=a.filter(e=>{var s;const a=!S||e.title.toLowerCase().includes(S.toLowerCase())||(null===(s=e.excerpt)||void 0===s?void 0:s.toLowerCase().includes(S.toLowerCase())),t=!T||e.category.id===T,i=""===D||"true"===D&&e.isPublished||"false"===D&&!e.isPublished;return a&&t&&i});return(0,d.jsxs)("div",{className:"blog-management",children:[(0,d.jsxs)("div",{className:"blog-management-header",children:[(0,d.jsx)("h2",{children:"Blog Management"}),(0,d.jsxs)("div",{className:"tab-navigation",children:[(0,d.jsxs)("button",{className:"tab-btn ".concat("posts"===e?"active":""),onClick:()=>s("posts"),children:["Posts (",a.length,")"]}),(0,d.jsxs)("button",{className:"tab-btn ".concat("categories"===e?"active":""),onClick:()=>s("categories"),children:["Categories (",r.length,")"]})]})]}),h&&(0,d.jsxs)("div",{className:"message error",children:[h,(0,d.jsx)("button",{onClick:U,children:"\xd7"})]}),m&&(0,d.jsxs)("div",{className:"message success",children:[m,(0,d.jsx)("button",{onClick:U,children:"\xd7"})]}),"posts"===e&&(0,d.jsxs)("div",{className:"posts-section",children:[(0,d.jsxs)("div",{className:"section-header",children:[(0,d.jsxs)("div",{className:"filters",children:[(0,d.jsx)("input",{type:"text",placeholder:"Search posts...",value:S,onChange:e=>F(e.target.value),className:"search-input"}),(0,d.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"filter-select",children:[(0,d.jsx)("option",{value:"",children:"All Categories"}),r.map(e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,d.jsxs)("select",{value:D,onChange:e=>L(e.target.value),className:"filter-select",children:[(0,d.jsx)("option",{value:"",children:"All Status"}),(0,d.jsx)("option",{value:"true",children:"Published"}),(0,d.jsx)("option",{value:"false",children:"Draft"})]})]}),(0,d.jsx)("button",{className:"btn btn-primary",onClick:()=>{y(null),f({categoryId:"",slug:"",titleAL:"",titleEN:"",titleIT:"",excerptAL:"",excerptEN:"",excerptIT:"",contentAL:"",contentEN:"",contentIT:"",metaDescriptionAL:"",metaDescriptionEN:"",metaDescriptionIT:"",metaKeywordsAL:"",metaKeywordsEN:"",metaKeywordsIT:"",featuredImageUrl:"",featuredImageAlt:"",isPublished:!1,isFeatured:!1,displayOrder:0}),j(!0),U()},disabled:c,children:"+ New Post"})]}),(0,d.jsx)("div",{className:"posts-grid",children:O.map(e=>(0,d.jsxs)("div",{className:"post-card",children:[e.featuredImageUrl&&(0,d.jsx)("img",{src:e.featuredImageUrl,alt:e.featuredImageAlt||e.title,className:"post-card-image"}),(0,d.jsxs)("div",{className:"post-card-content",children:[(0,d.jsx)("h3",{className:"post-card-title",children:e.title}),(0,d.jsx)("p",{className:"post-card-excerpt",children:e.excerpt}),(0,d.jsxs)("div",{className:"post-card-meta",children:[(0,d.jsx)("span",{className:"category-tag",children:e.category.name}),(0,d.jsx)("span",{className:"status-tag ".concat(e.isPublished?"published":"draft"),children:e.isPublished?"Published":"Draft"}),e.isFeatured&&(0,d.jsx)("span",{className:"featured-tag",children:"Featured"})]}),(0,d.jsxs)("div",{className:"post-card-stats",children:[(0,d.jsxs)("span",{children:["Views: ",e.viewCount]}),(0,d.jsxs)("span",{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,d.jsxs)("div",{className:"post-card-actions",children:[(0,d.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>(e=>{y(e),f({categoryId:e.category.id,slug:e.slug,titleAL:e.titleAL||"",titleEN:e.titleEN||"",titleIT:e.titleIT||"",excerptAL:e.excerptAL||"",excerptEN:e.excerptEN||"",excerptIT:e.excerptIT||"",contentAL:e.contentAL||"",contentEN:e.contentEN||"",contentIT:e.contentIT||"",metaDescriptionAL:e.metaDescriptionAL||"",metaDescriptionEN:e.metaDescriptionEN||"",metaDescriptionIT:e.metaDescriptionIT||"",metaKeywordsAL:e.metaKeywordsAL||"",metaKeywordsEN:e.metaKeywordsEN||"",metaKeywordsIT:e.metaKeywordsIT||"",featuredImageUrl:e.featuredImageUrl||"",featuredImageAlt:e.featuredImageAlt||"",isPublished:e.isPublished,isFeatured:e.isFeatured,displayOrder:e.displayOrder}),j(!0),U()})(e),children:"Edit"}),(0,d.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this post?"))try{o(!0),await g.A.deletePost(e),x("Post deleted successfully"),P()}catch(s){u(s.message)}finally{o(!1)}})(e.id),children:"Delete"})]})]})]},e.id))}),0===O.length&&!c&&(0,d.jsx)("div",{className:"empty-state",children:(0,d.jsxs)("p",{children:["No posts found. ",0===a.length?"Create your first post!":"Try adjusting your filters."]})})]}),"categories"===e&&(0,d.jsxs)("div",{className:"categories-section",children:[(0,d.jsxs)("div",{className:"section-header",children:[(0,d.jsx)("h3",{children:"Blog Categories"}),(0,d.jsx)("button",{className:"btn btn-primary",onClick:()=>{w(null),E({nameAL:"",nameEN:"",nameIT:"",slug:"",descriptionAL:"",descriptionEN:"",descriptionIT:"",displayOrder:0,isActive:!0}),A(!0),U()},disabled:c,children:"+ New Category"})]}),(0,d.jsx)("div",{className:"categories-list",children:r.map(e=>(0,d.jsxs)("div",{className:"category-item",children:[(0,d.jsxs)("div",{className:"category-info",children:[(0,d.jsx)("h4",{children:e.name}),(0,d.jsx)("p",{children:e.description}),(0,d.jsxs)("div",{className:"category-meta",children:[(0,d.jsxs)("span",{children:["Slug: ",e.slug]}),(0,d.jsxs)("span",{children:["Posts: ",e.postCount]}),(0,d.jsx)("span",{className:"status-tag ".concat(e.isActive?"active":"inactive"),children:e.isActive?"Active":"Inactive"})]})]}),(0,d.jsxs)("div",{className:"category-actions",children:[(0,d.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>(e=>{w(e),E({nameAL:e.nameAL||"",nameEN:e.nameEN||"",nameIT:e.nameIT||"",slug:e.slug,descriptionAL:e.descriptionAL||"",descriptionEN:e.descriptionEN||"",descriptionIT:e.descriptionIT||"",displayOrder:e.displayOrder,isActive:e.isActive}),A(!0),U()})(e),children:"Edit"}),(0,d.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this category?"))try{o(!0),await g.A.deleteCategory(e),x("Category deleted successfully"),P()}catch(s){u(s.message)}finally{o(!1)}})(e.id),disabled:e.postCount>0,children:"Delete"})]})]},e.id))}),0===r.length&&!c&&(0,d.jsx)("div",{className:"empty-state",children:(0,d.jsx)("p",{children:"No categories found. Create your first category!"})})]}),c&&(0,d.jsxs)("div",{className:"loading-overlay",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("p",{children:"Loading..."})]}),p&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>j(!1),children:(0,d.jsxs)("div",{className:"modal-content large",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:v?"Edit Post":"Create New Post"}),(0,d.jsx)("button",{className:"modal-close",onClick:()=>j(!1),children:"\xd7"})]}),(0,d.jsx)("div",{className:"modal-body",children:(0,d.jsxs)("div",{className:"form-grid",children:[(0,d.jsxs)("div",{className:"form-section",children:[(0,d.jsx)("h4",{children:"Basic Information"}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Category *"}),(0,d.jsxs)("select",{value:N.categoryId,onChange:e=>f((0,t.A)((0,t.A)({},N),{},{categoryId:e.target.value})),required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select Category"}),r.map(e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"URL Slug *"}),(0,d.jsx)("input",{type:"text",value:N.slug,onChange:e=>f((0,t.A)((0,t.A)({},N),{},{slug:e.target.value})),placeholder:"url-friendly-slug",required:!0})]})]}),(0,d.jsxs)("div",{className:"form-section",children:[(0,d.jsx)("h4",{children:"Titles"}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Albanian Title *"}),(0,d.jsx)("input",{type:"text",value:N.titleAL,onChange:e=>q("titleAL",e.target.value),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"English Title *"}),(0,d.jsx)("input",{type:"text",value:N.titleEN,onChange:e=>f((0,t.A)((0,t.A)({},N),{},{titleEN:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Italian Title *"}),(0,d.jsx)("input",{type:"text",value:N.titleIT,onChange:e=>f((0,t.A)((0,t.A)({},N),{},{titleIT:e.target.value})),required:!0})]})]}),(0,d.jsxs)("div",{className:"form-section full-width",children:[(0,d.jsx)("h4",{children:"Content (Note: Rich text editor will be added)"}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Albanian Content *"}),(0,d.jsx)("textarea",{value:N.contentAL,onChange:e=>f((0,t.A)((0,t.A)({},N),{},{contentAL:e.target.value})),rows:"10",required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"English Content *"}),(0,d.jsx)("textarea",{value:N.contentEN,onChange:e=>f((0,t.A)((0,t.A)({},N),{},{contentEN:e.target.value})),rows:"10",required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Italian Content *"}),(0,d.jsx)("textarea",{value:N.contentIT,onChange:e=>f((0,t.A)((0,t.A)({},N),{},{contentIT:e.target.value})),rows:"10",required:!0})]})]}),(0,d.jsxs)("div",{className:"form-section",children:[(0,d.jsx)("h4",{children:"Settings"}),(0,d.jsx)("div",{className:"form-group checkbox-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:N.isPublished,onChange:e=>f((0,t.A)((0,t.A)({},N),{},{isPublished:e.target.checked}))}),"Published"]})}),(0,d.jsx)("div",{className:"form-group checkbox-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:N.isFeatured,onChange:e=>f((0,t.A)((0,t.A)({},N),{},{isFeatured:e.target.checked}))}),"Featured"]})}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Display Order"}),(0,d.jsx)("input",{type:"number",value:N.displayOrder,onChange:e=>f((0,t.A)((0,t.A)({},N),{},{displayOrder:parseInt(e.target.value)||0}))})]})]})]})}),(0,d.jsxs)("div",{className:"modal-footer",children:[(0,d.jsx)("button",{className:"btn btn-secondary",onClick:()=>j(!1),disabled:c,children:"Cancel"}),(0,d.jsx)("button",{className:"btn btn-primary",onClick:async()=>{try{o(!0),U();const e=g.A.validatePostData(N);if(!e.isValid)return void u(e.errors.join(", "));v?(await g.A.updatePost(v.id,N),x("Post updated successfully")):(await g.A.createPost(N),x("Post created successfully")),j(!1),P()}catch(e){u(e.message)}finally{o(!1)}},disabled:c,children:c?"Saving...":v?"Update Post":"Create Post"})]})]})}),b&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>A(!1),children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:C?"Edit Category":"Create New Category"}),(0,d.jsx)("button",{className:"modal-close",onClick:()=>A(!1),children:"\xd7"})]}),(0,d.jsxs)("div",{className:"modal-body",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Albanian Name *"}),(0,d.jsx)("input",{type:"text",value:k.nameAL,onChange:e=>q("nameAL",e.target.value,"category"),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"English Name *"}),(0,d.jsx)("input",{type:"text",value:k.nameEN,onChange:e=>E((0,t.A)((0,t.A)({},k),{},{nameEN:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Italian Name *"}),(0,d.jsx)("input",{type:"text",value:k.nameIT,onChange:e=>E((0,t.A)((0,t.A)({},k),{},{nameIT:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"URL Slug *"}),(0,d.jsx)("input",{type:"text",value:k.slug,onChange:e=>E((0,t.A)((0,t.A)({},k),{},{slug:e.target.value})),placeholder:"url-friendly-slug",required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Display Order"}),(0,d.jsx)("input",{type:"number",value:k.displayOrder,onChange:e=>E((0,t.A)((0,t.A)({},k),{},{displayOrder:parseInt(e.target.value)||0}))})]}),(0,d.jsx)("div",{className:"form-group checkbox-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:k.isActive,onChange:e=>E((0,t.A)((0,t.A)({},k),{},{isActive:e.target.checked}))}),"Active"]})})]}),(0,d.jsxs)("div",{className:"modal-footer",children:[(0,d.jsx)("button",{className:"btn btn-secondary",onClick:()=>A(!1),disabled:c,children:"Cancel"}),(0,d.jsx)("button",{className:"btn btn-primary",onClick:async()=>{try{o(!0),U();const e=g.A.validateCategoryData(k);if(!e.isValid)return void u(e.errors.join(", "));C?(await g.A.updateCategory(C.id,k),x("Category updated successfully")):(await g.A.createCategory(k),x("Category created successfully")),A(!1),P()}catch(e){u(e.message)}finally{o(!1)}},disabled:c,children:c?"Saving...":C?"Update Category":"Create Category"})]})]})})]})},v=e=>{var s;let{reservation:a,onClose:t}=e;return(0,d.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,d.jsxs)("div",{className:"modal-content view-modal",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsxs)("div",{className:"modal-title",children:[(0,d.jsx)("h2",{children:"\ud83d\udccb Reservation Details"}),(0,d.jsxs)("span",{className:"reservation-id",children:["#",(null===(s=a.id)||void 0===s?void 0:s.slice(-8))||"N/A"]})]}),(0,d.jsx)("button",{className:"modal-close",onClick:t,children:"\xd7"})]}),(0,d.jsxs)("div",{className:"reservation-details",children:[(0,d.jsxs)("div",{className:"detail-section",children:[(0,d.jsx)("h3",{className:"section-title",children:"\ud83d\udc64 Customer Information"}),(0,d.jsxs)("div",{className:"detail-grid",children:[(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsxs)("div",{className:"detail-label",children:[(0,d.jsx)("span",{className:"detail-icon",children:"\ud83d\udcdd"}),"Full Name"]}),(0,d.jsx)("div",{className:"detail-value",children:a.name})]}),(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsxs)("div",{className:"detail-label",children:[(0,d.jsx)("span",{className:"detail-icon",children:"\ud83d\udce7"}),"Email Address"]}),(0,d.jsx)("div",{className:"detail-value",children:a.email})]}),(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsxs)("div",{className:"detail-label",children:[(0,d.jsx)("span",{className:"detail-icon",children:"\ud83d\udcde"}),"Phone Number"]}),(0,d.jsx)("div",{className:"detail-value",children:a.phone})]}),(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsxs)("div",{className:"detail-label",children:[(0,d.jsx)("span",{className:"detail-icon",children:"\ud83d\udc65"}),"Party Size"]}),(0,d.jsxs)("div",{className:"detail-value",children:[a.guests," ",1===a.guests?"guest":"guests"]})]})]})]}),(0,d.jsxs)("div",{className:"detail-section",children:[(0,d.jsx)("h3",{className:"section-title",children:"\ud83d\uddd3\ufe0f Reservation Information"}),(0,d.jsxs)("div",{className:"detail-grid",children:[(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsxs)("div",{className:"detail-label",children:[(0,d.jsx)("span",{className:"detail-icon",children:"\ud83d\udcc5"}),"Date"]}),(0,d.jsx)("div",{className:"detail-value",children:(i=a.date,new Date(i).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]}),(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsxs)("div",{className:"detail-label",children:[(0,d.jsx)("span",{className:"detail-icon",children:"\ud83d\udd52"}),"Time"]}),(0,d.jsx)("div",{className:"detail-value",children:(e=>{const[s,a]=e.split(":"),t=parseInt(s),i=t>=12?"PM":"AM";return"".concat(t%12||12,":").concat(a," ").concat(i)})(a.time)})]}),(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsxs)("div",{className:"detail-label",children:[(0,d.jsx)("span",{className:"detail-icon",children:"\ud83d\udcca"}),"Status"]}),(0,d.jsx)("div",{className:"detail-value",children:(0,d.jsx)("span",{className:"status-badge",style:{backgroundColor:(e=>{switch(e.toLowerCase()){case"pending":return"#f56565";case"confirmed":return"#48bb78";case"completed":return"#4299e1";case"cancelled":return"#ed8936";case"no_show":return"#9f7aea";default:return"#718096"}})(a.status),color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:a.status})})]}),(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsxs)("div",{className:"detail-label",children:[(0,d.jsx)("span",{className:"detail-icon",children:"\u23f0"}),"Created"]}),(0,d.jsx)("div",{className:"detail-value",children:new Date(a.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]})]}),(0,d.jsxs)("div",{className:"detail-section",children:[(0,d.jsx)("h3",{className:"section-title",children:"\ud83d\udcac Special Requests"}),(0,d.jsx)("div",{className:"special-requests",children:a.specialRequests?(0,d.jsxs)("div",{className:"request-content",children:[(0,d.jsx)("span",{className:"detail-icon",children:"\ud83d\udcdd"}),(0,d.jsx)("p",{children:a.specialRequests})]}):(0,d.jsxs)("div",{className:"no-requests",children:[(0,d.jsx)("span",{className:"detail-icon",children:"\u2705"}),(0,d.jsx)("p",{children:"No special requests"})]})})]})]}),(0,d.jsx)("div",{className:"modal-actions",children:(0,d.jsxs)("button",{onClick:t,className:"primary-btn",children:[(0,d.jsx)("span",{children:"\u2713"})," Close"]})})]})});var i},y=e=>{let{reservation:s,onClose:a,onUpdate:t,isLoading:l}=e;const[r,n]=(0,i.useState)(s.status);return(0,d.jsx)("div",{className:"modal-overlay",onClick:a,children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h2",{children:"Update Reservation Status"}),(0,d.jsx)("button",{className:"modal-close",onClick:a,children:"\xd7"})]}),(0,d.jsxs)("div",{className:"reservation-summary",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Customer:"})," ",s.name]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Date:"})," ",new Date(s.date).toLocaleDateString()]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Time:"})," ",s.time]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Guests:"})," ",s.guests]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Current Status:"}),(0,d.jsx)("span",{className:"status ".concat(s.status.toLowerCase()),children:s.status})]})]}),(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(s.id,r)},className:"update-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"status",children:"New Status:"}),(0,d.jsx)("select",{id:"status",value:r,onChange:e=>n(e.target.value),required:!0,children:[{value:"PENDING",label:"Pending",color:"#f56565"},{value:"CONFIRMED",label:"Confirmed",color:"#48bb78"},{value:"COMPLETED",label:"Completed",color:"#4299e1"},{value:"CANCELLED",label:"Cancelled",color:"#ed8936"},{value:"NO_SHOW",label:"No Show",color:"#9f7aea"}].map(e=>(0,d.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:a,className:"cancel-btn",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",disabled:l||r===s.status,className:"submit-btn",children:l?"Updating...":"Update Status"})]})]})]})})},N=e=>{let{onClose:s,onSubmit:a,isLoading:l}=e;const[r,n]=(0,i.useState)({name:"",email:"",phone:"",date:"",time:"",guests:2,specialRequests:""}),c=e=>{const{name:s,value:a}=e.target;n(e=>(0,t.A)((0,t.A)({},e),{},{[s]:a}))};return(0,d.jsx)("div",{className:"modal-overlay",onClick:s,children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h2",{children:"Add Manual Reservation"}),(0,d.jsx)("button",{className:"modal-close",onClick:s,children:"\xd7"})]}),(0,d.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!r.name||!r.email||!r.phone||!r.date||!r.time)return void alert("Please fill in all required fields.");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email))return void alert("Please enter a valid email address.");const s=new Date(r.date),t=new Date;t.setHours(0,0,0,0),s<t?alert("Please select a date that is today or in the future."):a(r)},className:"reservation-form",children:[(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"name",children:"Full Name *"}),(0,d.jsx)("input",{type:"text",id:"name",name:"name",value:r.name,onChange:c,required:!0,placeholder:"Enter customer name"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"email",children:"Email *"}),(0,d.jsx)("input",{type:"email",id:"email",name:"email",value:r.email,onChange:c,required:!0,placeholder:"customer@email.com"})]})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"phone",children:"Phone Number *"}),(0,d.jsx)("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:c,required:!0,placeholder:"+355 XX XXX XXX"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"guests",children:"Number of Guests *"}),(0,d.jsx)("select",{id:"guests",name:"guests",value:r.guests,onChange:c,required:!0,children:[1,2,3,4,5,6,7,8,9,10,11,12].map(e=>(0,d.jsxs)("option",{value:e,children:[e," ",1===e?"guest":"guests"]},e))})]})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"date",children:"Reservation Date *"}),(0,d.jsx)("input",{type:"date",id:"date",name:"date",value:r.date,onChange:c,required:!0,min:(new Date).toISOString().split("T")[0]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"time",children:"Reservation Time *"}),(0,d.jsxs)("select",{id:"time",name:"time",value:r.time,onChange:c,required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select time"}),(0,d.jsx)("option",{value:"12:00",children:"12:00 PM"}),(0,d.jsx)("option",{value:"12:30",children:"12:30 PM"}),(0,d.jsx)("option",{value:"13:00",children:"1:00 PM"}),(0,d.jsx)("option",{value:"13:30",children:"1:30 PM"}),(0,d.jsx)("option",{value:"14:00",children:"2:00 PM"}),(0,d.jsx)("option",{value:"14:30",children:"2:30 PM"}),(0,d.jsx)("option",{value:"15:00",children:"3:00 PM"}),(0,d.jsx)("option",{value:"18:00",children:"6:00 PM"}),(0,d.jsx)("option",{value:"18:30",children:"6:30 PM"}),(0,d.jsx)("option",{value:"19:00",children:"7:00 PM"}),(0,d.jsx)("option",{value:"19:30",children:"7:30 PM"}),(0,d.jsx)("option",{value:"20:00",children:"8:00 PM"}),(0,d.jsx)("option",{value:"20:30",children:"8:30 PM"}),(0,d.jsx)("option",{value:"21:00",children:"9:00 PM"}),(0,d.jsx)("option",{value:"21:30",children:"9:30 PM"})]})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"specialRequests",children:"Special Requests"}),(0,d.jsx)("textarea",{id:"specialRequests",name:"specialRequests",value:r.specialRequests,onChange:c,placeholder:"Any dietary restrictions, special occasions, or other requests...",rows:"3"})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:s,className:"cancel-btn",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",disabled:l,className:"submit-btn",children:l?"Adding...":"Add Reservation"})]})]})]})})},f=()=>{var e;const{isSignedIn:s,user:a}=(0,l.Jd)(),[o,m]=(0,i.useState)("overview"),[x,g]=(0,i.useState)([]),[f,b]=(0,i.useState)({totalReservations:0,pendingReservations:0,activeBookings:0,completedReservations:0}),[A,C]=(0,i.useState)(!0),[w,k]=(0,i.useState)(!1),[E,S]=(0,i.useState)(!1),[F,T]=(0,i.useState)(!1),[I,D]=(0,i.useState)(null),[L,P]=(0,i.useState)(!1),[U,q]=(0,i.useState)(!1),[O,B]=(0,i.useState)(!1);(0,i.useEffect)(()=>{const e=()=>{window.innerWidth<=1024?B(!0):B(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const[R,M]=(0,i.useState)({restaurantName:"",email:"",phone:"",address:"",operatingHours:{monday:{open:"12:00",close:"22:00",closed:!1},tuesday:{open:"12:00",close:"22:00",closed:!1},wednesday:{open:"12:00",close:"22:00",closed:!1},thursday:{open:"12:00",close:"22:00",closed:!1},friday:{open:"12:00",close:"22:00",closed:!1},saturday:{open:"12:00",close:"22:00",closed:!1},sunday:{open:"12:00",close:"22:00",closed:!1}},maxCapacity:50,websiteUrl:"",facebookUrl:"",instagramUrl:"",emailNotifications:!0,smsNotifications:!1}),[W,z]=(0,i.useState)(!1),[H,V]=(0,i.useState)(!1),[G,K]=(0,i.useState)(""),[_,J]=(0,i.useState)([]),[X,$]=(0,i.useState)(!1),Y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{C(!0);const s={};e&&(s.date=e);const a=await n.uU.getAll(s);if(a.success){const s=a.data;e?(J(s),$(!0)):(g(s),J([]),$(!1));const t=s.length,i=s.filter(e=>"PENDING"===e.status).length,l=s.filter(e=>"CONFIRMED"===e.status).length,r=s.filter(e=>"COMPLETED"===e.status).length;b({totalReservations:t,pendingReservations:i,activeBookings:l,completedReservations:r})}}catch(s){console.error("Error fetching dashboard data:",s)}finally{C(!1)}};if((0,i.useEffect)(()=>{s&&(Y(),ie())},[s]),!s)return(0,d.jsx)(r.C5,{to:"/admin-login",replace:!0});const Q=(null===(e="user_xxxxx,user_yyyyy")?void 0:e.split(","))||[];if(s&&a&&!Q.includes(a.id))return(0,d.jsx)("div",{className:"unauthorized-container",children:(0,d.jsxs)("div",{className:"unauthorized-content",children:[(0,d.jsx)("h1",{children:"Access Denied"}),(0,d.jsx)("p",{children:"You don't have permission to access this area."}),(0,d.jsx)("button",{onClick:()=>window.location.href="/",className:"home-button",children:"Go to Homepage"})]})});const Z=async()=>{const e=X?G:null;await Y(e)},ee=e=>{const s=e.target.value;K(s),s?Y(s):Y()},se=()=>{const e=(new Date).toISOString().split("T")[0];K(e),Y(e)},ae=()=>{K(""),Y()},te=()=>X?_:x,ie=async()=>{try{z(!0);const e=await c.getSettings();e.success?M(e.data):console.error("Failed to load restaurant settings:",e.error)}catch(e){console.error("Error loading restaurant settings:",e)}finally{z(!1)}},le=async e=>{try{V(!0);const s=c.validateSettings(e);if(!s.isValid)return void alert("Please fix the following errors:\n"+s.errors.join("\n"));const a=await c.updateSettings(e);a.success?(M(a.data),alert("Settings saved successfully!")):alert("Failed to save settings: "+a.error)}catch(s){console.error("Error saving restaurant settings:",s),alert("Error saving settings: "+s.message)}finally{V(!1)}},re=e=>{e.preventDefault();const s=new FormData(e.target),a=(0,t.A)((0,t.A)({},R),{},{restaurantName:s.get("restaurantName"),phone:s.get("phone"),email:s.get("email"),address:s.get("address"),websiteUrl:s.get("websiteUrl"),facebookUrl:s.get("facebookUrl"),instagramUrl:s.get("instagramUrl"),emailNotifications:"on"===s.get("emailNotifications"),smsNotifications:"on"===s.get("smsNotifications")});le(a)},ne=e=>{e.preventDefault();const s=new FormData(e.target),a=(0,t.A)({},R.operatingHours);["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].forEach(e=>{a[e]={open:s.get("".concat(e,"_open")),close:s.get("".concat(e,"_close")),closed:"on"===s.get("".concat(e,"_closed"))}});const i=(0,t.A)((0,t.A)({},R),{},{operatingHours:a});le(i)};return(0,d.jsxs)("div",{className:"dashboard-container",children:[(0,d.jsxs)("div",{className:"dashboard-header",children:[(0,d.jsxs)("div",{className:"header-left",children:[(0,d.jsx)("img",{src:"https://ucarecdn.com/f2ebac4d-52d3-45f7-997d-3e2dea09557b/ullishtja_logo.jpeg",alt:"Ullishtja Logo",className:"dashboard-logo"}),(0,d.jsxs)("div",{className:"header-text",children:[(0,d.jsx)("h1",{children:"Admin Dashboard"}),(0,d.jsxs)("p",{children:["Welcome back, ",(null===a||void 0===a?void 0:a.firstName)||"Admin","!"]})]})]}),(0,d.jsx)("div",{className:"header-right",children:(0,d.jsx)(l.uF,{})})]}),(0,d.jsxs)("div",{className:"dashboard-content",children:[(0,d.jsxs)("nav",{className:"dashboard-nav ".concat(O?"collapsed":""),children:[(0,d.jsxs)("div",{className:"nav-header",children:[(0,d.jsx)("button",{className:"nav-toggle",onClick:()=>B(!O),title:O?"Expand sidebar":"Collapse sidebar",children:(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{d:"M3 12h18M3 6h18M3 18h18"})})}),!O&&(0,d.jsx)("span",{className:"nav-title",children:"Dashboard"})]}),(0,d.jsxs)("div",{className:"nav-items",children:[(0,d.jsxs)("button",{className:"nav-tab ".concat("overview"===o?"active":""),onClick:()=>m("overview"),title:"Overview",children:[(0,d.jsxs)("svg",{className:"nav-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,d.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"})]}),!O&&(0,d.jsx)("span",{className:"nav-text",children:"Overview"})]}),(0,d.jsxs)("button",{className:"nav-tab ".concat("menu"===o?"active":""),onClick:()=>m("menu"),title:"Menu Management",children:[(0,d.jsxs)("svg",{className:"nav-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M9 12l2 2 4-4"}),(0,d.jsx)("path",{d:"M21 12c.552 0 1-.448 1-1V5c0-.552-.448-1-1-1H3c-.552 0-1 .448-1 1v6c0 .552.448 1 1 1h9zm0 0v7c0 .552-.448 1-1 1H11c-.552 0-1-.448-1-1v-7"})]}),!O&&(0,d.jsx)("span",{className:"nav-text",children:"Menu"})]}),(0,d.jsxs)("button",{className:"nav-tab ".concat("blog"===o?"active":""),onClick:()=>m("blog"),title:"Blog Management",children:[(0,d.jsxs)("svg",{className:"nav-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,d.jsx)("polyline",{points:"14,2 14,8 20,8"}),(0,d.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,d.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,d.jsx)("polyline",{points:"10,9 9,9 8,9"})]}),!O&&(0,d.jsx)("span",{className:"nav-text",children:"Blog"})]}),(0,d.jsxs)("button",{className:"nav-tab ".concat("timeslots"===o?"active":""),onClick:()=>m("timeslots"),title:"Time Slots",children:[(0,d.jsxs)("svg",{className:"nav-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,d.jsx)("polyline",{points:"12,6 12,12 16,14"})]}),!O&&(0,d.jsx)("span",{className:"nav-text",children:"Time Slots"})]}),(0,d.jsxs)("button",{className:"nav-tab ".concat("layout"===o?"active":""),onClick:()=>m("layout"),title:"Restaurant Layout",children:[(0,d.jsxs)("svg",{className:"nav-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,d.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"9"}),(0,d.jsx)("line",{x1:"9",y1:"15",x2:"15",y2:"15"}),(0,d.jsx)("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]}),!O&&(0,d.jsx)("span",{className:"nav-text",children:"Layout"})]}),(0,d.jsxs)("button",{className:"nav-tab ".concat("settings"===o?"active":""),onClick:()=>m("settings"),title:"Settings",children:[(0,d.jsxs)("svg",{className:"nav-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,d.jsx)("path",{d:"M12 1v6m0 8v6m11-7h-6m-8 0H1m17.5-2.5L19 19l-2.5-2.5M7 7L4.5 4.5M7 17l-2.5 2.5M17 7l2.5-2.5"})]}),!O&&(0,d.jsx)("span",{className:"nav-text",children:"Settings"})]})]})]}),(0,d.jsx)("main",{className:"dashboard-main",children:(()=>{switch(o){case"overview":return(0,d.jsxs)("div",{className:"tab-content",children:[(0,d.jsx)("h2",{children:"Dashboard Overview"}),(0,d.jsxs)("div",{className:"stats-grid",children:[(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("h3",{children:"Total Reservations"}),(0,d.jsx)("div",{className:"stat-number",children:f.totalReservations}),(0,d.jsx)("div",{className:"stat-change",children:X?"For ".concat(new Date(G).toLocaleDateString()):"All time reservations"})]}),(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("h3",{children:"Pending"}),(0,d.jsx)("div",{className:"stat-number",children:f.pendingReservations}),(0,d.jsx)("div",{className:"stat-change",children:"Awaiting confirmation"})]}),(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("h3",{children:"Active Bookings"}),(0,d.jsx)("div",{className:"stat-number",children:f.activeBookings}),(0,d.jsx)("div",{className:"stat-change",children:"Confirmed reservations"})]}),(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("h3",{children:"Completed"}),(0,d.jsx)("div",{className:"stat-number",children:f.completedReservations}),(0,d.jsx)("div",{className:"stat-change",children:"Successfully served"})]})]}),(0,d.jsxs)("div",{className:"reservations-section",children:[(0,d.jsxs)("div",{className:"table-header",children:[(0,d.jsx)("h3",{children:X?"Reservations for ".concat(new Date(G).toLocaleDateString()):"Recent Reservations"}),(0,d.jsxs)("div",{className:"table-actions",children:[(0,d.jsxs)("div",{className:"date-filter-controls",children:[(0,d.jsx)("input",{type:"date",value:G,onChange:ee,className:"date-filter-input"}),(0,d.jsx)("button",{onClick:se,className:"today-btn",children:"Today"}),X&&(0,d.jsx)("button",{onClick:ae,className:"clear-filter-btn",children:"Show All"})]}),(0,d.jsxs)("div",{className:"reservation-count",children:[(0,d.jsxs)("p",{children:["Total Reservations: ",te().length]}),(0,d.jsx)("button",{onClick:Z,className:"refresh-btn",disabled:A,children:A?"Refreshing...":"Refresh"})]})]})]}),(0,d.jsx)("div",{className:"reservations-table",children:(0,d.jsxs)("table",{children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Date"}),(0,d.jsx)("th",{children:"Name"}),(0,d.jsx)("th",{children:"Email"}),(0,d.jsx)("th",{children:"Phone"}),(0,d.jsx)("th",{children:"Guests"}),(0,d.jsx)("th",{children:"Time"}),(0,d.jsx)("th",{children:"Status"}),(0,d.jsx)("th",{children:"Special Requests"}),(0,d.jsx)("th",{children:"Actions"})]})}),(0,d.jsx)("tbody",{children:0===te().length?(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"9",className:"no-data",children:A?"Loading reservations...":"No reservations found"})}):te().map(e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),(0,d.jsx)("td",{children:e.name}),(0,d.jsx)("td",{children:e.email}),(0,d.jsx)("td",{children:e.phone}),(0,d.jsx)("td",{children:e.guests}),(0,d.jsx)("td",{children:e.time}),(0,d.jsx)("td",{children:(0,d.jsx)("span",{className:"status ".concat(e.status.toLowerCase()),children:e.status})}),(0,d.jsx)("td",{children:e.specialRequests||"None"}),(0,d.jsxs)("td",{children:[(0,d.jsx)("button",{onClick:()=>(e=>{D(e),S(!0)})(e),className:"action-btn view",children:"View"}),(0,d.jsx)("button",{onClick:()=>(e=>{D(e),T(!0)})(e),className:"action-btn edit",children:"Update"})]})]},e.id))})]})})]})]});case"menu":return(0,d.jsx)(h,{});case"blog":return(0,d.jsx)(j,{});case"timeslots":return(0,d.jsx)(p,{});case"layout":return(0,d.jsx)(u,{});case"settings":return(0,d.jsxs)("div",{className:"tab-content",children:[(0,d.jsx)("h2",{children:"Settings"}),W?(0,d.jsx)("div",{className:"loading",children:"Loading settings..."}):(0,d.jsxs)("div",{className:"settings-sections",children:[(0,d.jsxs)("div",{className:"settings-section",children:[(0,d.jsx)("h3",{children:"Restaurant Information"}),(0,d.jsxs)("form",{onSubmit:re,children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Restaurant Name"}),(0,d.jsx)("input",{type:"text",name:"restaurantName",value:R.restaurantName,onChange:e=>M((0,t.A)((0,t.A)({},R),{},{restaurantName:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Phone Number"}),(0,d.jsx)("input",{type:"tel",name:"phone",value:R.phone,onChange:e=>M((0,t.A)((0,t.A)({},R),{},{phone:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Email"}),(0,d.jsx)("input",{type:"email",name:"email",value:R.email,onChange:e=>M((0,t.A)((0,t.A)({},R),{},{email:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Address"}),(0,d.jsx)("input",{type:"text",name:"address",value:R.address,onChange:e=>M((0,t.A)((0,t.A)({},R),{},{address:e.target.value}))})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Website URL"}),(0,d.jsx)("input",{type:"url",name:"websiteUrl",value:R.websiteUrl||"",onChange:e=>M((0,t.A)((0,t.A)({},R),{},{websiteUrl:e.target.value})),placeholder:"https://example.com"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Facebook URL"}),(0,d.jsx)("input",{type:"url",name:"facebookUrl",value:R.facebookUrl||"",onChange:e=>M((0,t.A)((0,t.A)({},R),{},{facebookUrl:e.target.value})),placeholder:"https://facebook.com/yourpage"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Instagram URL"}),(0,d.jsx)("input",{type:"url",name:"instagramUrl",value:R.instagramUrl||"",onChange:e=>M((0,t.A)((0,t.A)({},R),{},{instagramUrl:e.target.value})),placeholder:"https://instagram.com/yourpage"})]}),(0,d.jsx)("div",{className:"form-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",name:"emailNotifications",checked:R.emailNotifications,onChange:e=>M((0,t.A)((0,t.A)({},R),{},{emailNotifications:e.target.checked}))}),"Email Notifications"]})}),(0,d.jsx)("div",{className:"form-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",name:"smsNotifications",checked:R.smsNotifications,onChange:e=>M((0,t.A)((0,t.A)({},R),{},{smsNotifications:e.target.checked}))}),"SMS Notifications"]})}),(0,d.jsx)("button",{type:"submit",className:"save-btn",disabled:H,children:H?"Saving...":"Save Changes"})]})]}),(0,d.jsxs)("div",{className:"settings-section",children:[(0,d.jsx)("h3",{children:"Operating Hours"}),(0,d.jsxs)("form",{onSubmit:ne,children:[(0,d.jsx)("div",{className:"hours-grid",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(e=>{var s,a,i,l,r;return(0,d.jsxs)("div",{className:"day-hours",children:[(0,d.jsx)("span",{children:e.charAt(0).toUpperCase()+e.slice(1)}),(0,d.jsx)("input",{type:"time",name:"".concat(e,"_open"),value:(null===(s=R.operatingHours[e])||void 0===s?void 0:s.open)||"12:00",onChange:s=>M((0,t.A)((0,t.A)({},R),{},{operatingHours:(0,t.A)((0,t.A)({},R.operatingHours),{},{[e]:(0,t.A)((0,t.A)({},R.operatingHours[e]),{},{open:s.target.value})})})),disabled:null===(a=R.operatingHours[e])||void 0===a?void 0:a.closed}),(0,d.jsx)("span",{children:"to"}),(0,d.jsx)("input",{type:"time",name:"".concat(e,"_close"),value:(null===(i=R.operatingHours[e])||void 0===i?void 0:i.close)||"22:00",onChange:s=>M((0,t.A)((0,t.A)({},R),{},{operatingHours:(0,t.A)((0,t.A)({},R.operatingHours),{},{[e]:(0,t.A)((0,t.A)({},R.operatingHours[e]),{},{close:s.target.value})})})),disabled:null===(l=R.operatingHours[e])||void 0===l?void 0:l.closed}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",name:"".concat(e,"_closed"),checked:(null===(r=R.operatingHours[e])||void 0===r?void 0:r.closed)||!1,onChange:s=>M((0,t.A)((0,t.A)({},R),{},{operatingHours:(0,t.A)((0,t.A)({},R.operatingHours),{},{[e]:(0,t.A)((0,t.A)({},R.operatingHours[e]),{},{closed:s.target.checked})})}))}),"Closed"]})]},e)})}),(0,d.jsx)("button",{type:"submit",className:"save-btn",disabled:H,children:H?"Saving...":"Save Hours"})]})]})]})]});default:return(0,d.jsx)("div",{children:"Tab content not found"})}})()})]}),(0,d.jsx)("button",{className:"fab-button",onClick:()=>k(!0),title:"Add Manual Reservation",children:"+"}),w&&(0,d.jsx)(N,{onClose:()=>k(!1),onSubmit:async e=>{P(!0);try{const s=await n.uU.create(e);s.success?(alert("Reservation added successfully!"),k(!1),window.location.reload()):alert("Failed to add reservation: "+s.error)}catch(s){alert("Error adding reservation: "+s.message)}finally{P(!1)}},isLoading:L}),E&&I&&(0,d.jsx)(v,{reservation:I,onClose:()=>{S(!1),D(null)}}),F&&I&&(0,d.jsx)(y,{reservation:I,onClose:()=>{T(!1),D(null)},onUpdate:async(e,s)=>{q(!0);try{const a=await n.uU.updateStatus(e,s);if(a.success){const e=await n.uU.getAll();if(e.success){g(e.data);const s=e.data.length,a=e.data.filter(e=>"PENDING"===e.status).length,t=e.data.filter(e=>"CONFIRMED"===e.status).length,i=e.data.filter(e=>"COMPLETED"===e.status).length;b({totalReservations:s,pendingReservations:a,activeBookings:t,completedReservations:i})}T(!1),D(null)}else alert("Failed to update status: "+a.error)}catch(a){alert("Error updating status: "+a.message)}finally{q(!1)}},isLoading:U})]})}},4554:(e,s,a)=>{a.d(s,{A:()=>t});const t=new class{constructor(){this.apiBaseUrl=""}async getPosts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{published:s,category:a,featured:t,limit:i,offset:l,search:r,language:n="al"}=e,c=new URLSearchParams;void 0!==s&&c.append("published",s),a&&c.append("category",a),void 0!==t&&c.append("featured",t),i&&c.append("limit",i),l&&c.append("offset",l),r&&c.append("search",r),n&&c.append("language",n);try{const e=await fetch("".concat(this.apiBaseUrl,"/api/blog/posts?").concat(c)),s=await e.json();if(!e.ok)throw new Error(s.error||"Failed to fetch posts");return s}catch(o){throw console.error("Error fetching blog posts:",o),o}}async getPost(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"al";try{const a=await fetch("".concat(this.apiBaseUrl,"/api/blog/posts?id=").concat(e,"&language=").concat(s)),t=await a.json();if(!a.ok)throw new Error(t.error||"Failed to fetch post");return t.data[0]||null}catch(a){throw console.error("Error fetching blog post:",a),a}}async createPost(e){try{const s=await fetch("".concat(this.apiBaseUrl,"/api/blog/posts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to create post");return a}catch(s){throw console.error("Error creating blog post:",s),s}}async updatePost(e,s){try{const a=await fetch("".concat(this.apiBaseUrl,"/api/blog/posts?id=").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await a.json();if(!a.ok)throw new Error(t.error||"Failed to update post");return t}catch(a){throw console.error("Error updating blog post:",a),a}}async deletePost(e){try{const s=await fetch("".concat(this.apiBaseUrl,"/api/blog/posts?id=").concat(e),{method:"DELETE"}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to delete post");return a}catch(s){throw console.error("Error deleting blog post:",s),s}}async getCategories(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{active:s,language:a="al",includePosts:t=!1}=e,i=new URLSearchParams;void 0!==s&&i.append("active",s),a&&i.append("language",a),t&&i.append("includePosts",t);try{const e=await fetch("".concat(this.apiBaseUrl,"/api/blog/categories?").concat(i)),s=await e.json();if(!e.ok)throw new Error(s.error||"Failed to fetch categories");return s}catch(l){throw console.error("Error fetching blog categories:",l),l}}async createCategory(e){try{const s=await fetch("".concat(this.apiBaseUrl,"/api/blog/categories"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to create category");return a}catch(s){throw console.error("Error creating blog category:",s),s}}async updateCategory(e,s){try{const a=await fetch("".concat(this.apiBaseUrl,"/api/blog/categories?id=").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await a.json();if(!a.ok)throw new Error(t.error||"Failed to update category");return t}catch(a){throw console.error("Error updating blog category:",a),a}}async deleteCategory(e){try{const s=await fetch("".concat(this.apiBaseUrl,"/api/blog/categories?id=").concat(e),{method:"DELETE"}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to delete category");return a}catch(s){throw console.error("Error deleting blog category:",s),s}}async uploadImage(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{blogPostId:a,title:t,altText:i}=s,l=new FormData;l.append("image",e),a&&l.append("blogPostId",a),t&&l.append("title",t),i&&l.append("altText",i);try{const e=await fetch("".concat(this.apiBaseUrl,"/api/blog/upload"),{method:"POST",body:l}),s=await e.json();if(!e.ok)throw new Error(s.error||"Failed to upload image");return s}catch(r){throw console.error("Error uploading image:",r),r}}async deleteImage(e){try{const s=await fetch("".concat(this.apiBaseUrl,"/api/blog/upload?imageId=").concat(e),{method:"DELETE"}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to delete image");return a}catch(s){throw console.error("Error deleting image:",s),s}}async deleteImageByFilename(e){try{const s=await fetch("".concat(this.apiBaseUrl,"/api/blog/upload?filename=").concat(e),{method:"DELETE"}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to delete image");return a}catch(s){throw console.error("Error deleting image:",s),s}}generateSlug(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-")}validatePostData(e){const s=[];return e.titleAL||s.push("Albanian title is required"),e.titleEN||s.push("English title is required"),e.titleIT||s.push("Italian title is required"),e.contentAL||s.push("Albanian content is required"),e.contentEN||s.push("English content is required"),e.contentIT||s.push("Italian content is required"),e.categoryId||s.push("Category is required"),e.slug||s.push("Slug is required"),{isValid:0===s.length,errors:s}}validateCategoryData(e){const s=[];return e.nameAL||s.push("Albanian name is required"),e.nameEN||s.push("English name is required"),e.nameIT||s.push("Italian name is required"),e.slug||s.push("Slug is required"),{isValid:0===s.length,errors:s}}}}}]);
//# sourceMappingURL=28.d0f2e906.chunk.js.map