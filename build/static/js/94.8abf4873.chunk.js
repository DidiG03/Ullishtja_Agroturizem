"use strict";(self.webpackChunkullishtja_agroturizem=self.webpackChunkullishtja_agroturizem||[]).push([[94],{8094:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var o=s(5043),n=s(205),i=s(9379),r=s(3986),a=s(579);const l=["src","alt","className","sizes","loading"],c=e=>{let{src:t,alt:s,className:n="",sizes:c="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",loading:h="lazy"}=e,d=(0,r.A)(e,l);const[u,p]=(0,o.useState)(!1),[g,m]=(0,o.useState)(!1),[x,j]=(0,o.useState)(!1),v=(0,o.useRef)(),w=(e=>{if(e.startsWith("http://")||e.startsWith("https://"))return{webp:e,jpeg:e,fallback:e};const t=e.split("/").pop().split(".")[0],s=e.substring(0,e.lastIndexOf("/"));return{webp:"".concat(s,"/gallery/").concat(t,"-original.webp"),jpeg:"".concat(s,"/gallery/").concat(t,".jpg"),fallback:e}})(t);(0,o.useEffect)(()=>{const e=new IntersectionObserver(t=>{let[s]=t;s.isIntersecting&&(m(!0),e.disconnect())},{threshold:.1,rootMargin:"50px"});return v.current&&e.observe(v.current),()=>e.disconnect()},[]);return(0,a.jsxs)("div",{ref:v,className:"optimized-image-container ".concat(n),children:[!u&&(0,a.jsx)("div",{className:"image-placeholder",children:(0,a.jsx)("div",{className:"loading-animation"})}),(g||"eager"===h)&&(0,a.jsxs)("picture",{children:[(0,a.jsx)("source",{srcSet:"\n              ".concat(w.webp.replace("-original","-mobile")," 600w,\n              ").concat(w.webp," 1200w\n            "),sizes:c,type:"image/webp"}),(0,a.jsx)("source",{srcSet:"\n              ".concat(w.jpeg.replace(".jpg","-mobile.jpg")," 600w,\n              ").concat(w.jpeg," 1200w\n            "),sizes:c,type:"image/jpeg"}),(0,a.jsx)("img",(0,i.A)({src:(()=>{if(x)return w.fallback;return t.startsWith("http://")||t.startsWith("https://")||t.includes("/images/")&&!t.includes("/gallery/")?t:(()=>{const e=document.createElement("canvas");return e.width=e.height=1,0===e.toDataURL("image/webp").indexOf("data:image/webp")})()?w.webp:w.jpeg})(),alt:s,loading:h,onLoad:()=>{p(!0)},onError:()=>{j(!0)},className:"optimized-image ".concat(u?"loaded":"loading")},d))]})]})},h=e=>{var t,s,i,r;let{currentLanguage:l,translations:h}=e;const[d,u]=(0,o.useState)(null),[p,g]=(0,o.useState)(!0),[m,x]=(0,o.useState)(null),[j,v]=(0,o.useState)(0),[w,b]=(0,o.useState)(!1),[k,f]=(0,o.useState)(!1),N=h,[C,L]=(0,o.useState)(!1);(0,o.useEffect)(()=>{const e=()=>{L(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,o.useEffect)(()=>{(async()=>{try{const e=await n.A.fetchGooglePlacePhotos();u(e)}catch(e){console.error("Error loading photos:",e)}finally{g(!1)}})()},[]);const y=(0,o.useCallback)((e,t)=>{x(e),v(t),b(!0),document.body.style.overflow="hidden"},[]),S=(0,o.useCallback)(()=>{b(!1),x(null),document.body.style.overflow="unset"},[]),E=(0,o.useCallback)(()=>{if(d&&d.photos.length>0){const e=(j+1)%d.photos.length;v(e),x(d.photos[e])}},[j,d]),z=(0,o.useCallback)(()=>{if(d&&d.photos.length>0){const e=0===j?d.photos.length-1:j-1;v(e),x(d.photos[e])}},[j,d]);var P,W;if((0,o.useEffect)(()=>{const e=e=>{if(w)switch(e.key){case"ArrowRight":E();break;case"ArrowLeft":z();break;case"Escape":S()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[w,E,z,S]),p)return(0,a.jsx)("section",{id:"customer-photos",className:"customer-photos",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"photos-header",children:[(0,a.jsx)("h2",{children:(null===(P=N.customerPhotos)||void 0===P?void 0:P.title)||"Customer Photos"}),(0,a.jsx)("p",{children:(null===(W=N.customerPhotos)||void 0===W?void 0:W.subtitle)||"See what our guests are sharing"})]}),(0,a.jsx)("div",{className:"photos-loading",children:(0,a.jsx)("div",{className:"loading-grid",children:[...Array(8)].map((e,t)=>(0,a.jsx)("div",{className:"loading-photo"},t))})})]})});if(!d||!d.photos||0===d.photos.length)return null;const M=(()=>{if(C){if(k)return d.photos;return[7,8,4].filter(e=>e<d.photos.length).map(e=>d.photos[e])}return d.photos.slice(0,8)})(),A=C?d.photos.length>3:d.photos.length>8;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("section",{id:"customer-photos",className:"customer-photos",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"photos-header",children:[(0,a.jsx)("h2",{children:(null===(t=N.customerPhotos)||void 0===t?void 0:t.title)||"Customer Photos"}),(0,a.jsx)("p",{children:(null===(s=N.customerPhotos)||void 0===s?void 0:s.subtitle)||"See what our guests are sharing"})]}),(0,a.jsx)("div",{className:"photos-grid",children:M.map((e,t)=>(0,a.jsx)("div",{className:"photo-item ".concat(0!==t||C?"":"featured"),onClick:()=>y(e,t),role:"button",tabIndex:0,onKeyDown:s=>{"Enter"!==s.key&&" "!==s.key||y(e,t)},children:(0,a.jsxs)("div",{className:"photo-container",children:[(0,a.jsx)(c,{src:e.url||e.highResUrl,alt:"Customer photo ".concat(t+1),className:"customer-photo",loading:t<4?"eager":"lazy"}),(0,a.jsx)("div",{className:"photo-overlay",children:(0,a.jsx)("div",{className:"photo-icon",children:(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{d:"M15 3H6C5.175 3 4.5 3.675 4.5 4.5V15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M10.5 3H18C18.825 3 19.5 3.675 19.5 4.5V12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M19.5 16.5V18C19.5 18.825 18.825 19.5 18 19.5H6C5.175 19.5 4.5 18.825 4.5 18V6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})})]})},e.id))}),A&&(0,a.jsx)("div",{className:"view-more",children:(0,a.jsxs)("button",{className:"view-more-btn",onClick:()=>{C?f(!k):y(d.photos[0],0)},children:[C&&k?(null===(i=N.customerPhotos)||void 0===i?void 0:i.showLess)||"Shiko m\xeb pak":(null===(r=N.customerPhotos)||void 0===r?void 0:r.viewAll)||"Shiko t\xeb gjitha",(0,a.jsxs)("span",{className:"photo-count",children:["(",d.photos.length,")"]})]})})]})}),w&&m&&(0,a.jsx)("div",{className:"lightbox-overlay",onClick:S,children:(0,a.jsxs)("div",{className:"lightbox-container",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"lightbox-close",onClick:S,children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),(0,a.jsxs)("div",{className:"lightbox-content",children:[(0,a.jsx)("button",{className:"lightbox-nav lightbox-prev",onClick:z,children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,a.jsx)("div",{className:"lightbox-image-container",children:(0,a.jsx)(c,{src:m.highResUrl||m.url,alt:"Customer photo ".concat(j+1),className:"lightbox-image",loading:"eager"})}),(0,a.jsx)("button",{className:"lightbox-nav lightbox-next",onClick:E,children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,a.jsxs)("div",{className:"lightbox-info",children:[(0,a.jsxs)("span",{className:"photo-counter",children:[j+1," / ",d.photos.length]}),m.attributions&&m.attributions.length>0&&(0,a.jsx)("div",{className:"photo-attribution",children:m.attributions[0]})]})]})})]})}}}]);
//# sourceMappingURL=94.8abf4873.chunk.js.map